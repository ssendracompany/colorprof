---
import '@/styles/components/contact.css';

const serviceTypes = [
  'Pintura Interior',
  'Pintura Exterior',
  'Decoración Personalizada',
  'Otro'
];
---

<section id="contacto" class="contact">
  <div class="container">
    <div class="contact-content">
      <form class="contact-form" name="contact-form" method="POST" action="https://formsubmit.co/info@profesionalesdelcolor.com" aria-label="Formulario de Contacto Profesional">
        <h2 class="form-title">Contáctanos para tu Proyecto</h2>

        <div class="form-group">
          <label for="name" class="form-label">Nombre Completo <span class="required-star">*</span></label>
          <input
            type="text"
            id="name"
            name="name"
            class="form-input"
            placeholder="Ej: Juan Pérez"
            required
            aria-required="true"
          />
        </div>

        <div class="form-group">
          <label for="email" class="form-label">Correo Electrónico <span class="required-star">*</span></label>
          <input
            type="email"
            id="email"
            name="_replyto"
            class="form-input"
            placeholder="tu.email@ejemplo.com"
            required
            aria-required="true"
          />
        </div>

        <div class="form-group">
          <label for="phone" class="form-label">Teléfono (Opcional)</label>
          <input
            type="tel"
            id="phone"
            name="phone"
            class="form-input"
            placeholder="Ej: +34 600 123 456"
          />
        </div>

        <div class="form-group">
          <label for="service" class="form-label">Tipo de Servicio</label>
          <div class="select-wrapper">
            <select
              id="service"
              name="service"
              class="form-input form-select"
            >
              <option value="Pintura Interior">Pintura Interior</option>
              <option value="Pintura Exterior">Pintura Exterior</option>
              <option value="Decoración">Decoración</option>
              <option value="Otro">Otro</option>
            </select>
            <div class="select-arrow"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="message" class="form-label">Mensaje / Detalles del Proyecto <span class="required-star">*</span></label>
          <textarea
            id="message"
            name="message"
            class="form-input"
            rows="4"
            placeholder="Describe brevemente lo que necesitas..."
            required
            aria-required="true"
          ></textarea>
        </div>

        <!-- FormSubmit Configuration (hidden fields) -->
        <input type="hidden" name="_captcha" value="false" />
        <input type="hidden" name="_next" value="https://profesionalesdelcolor.com/" />
        <input type="hidden" name="_subject" value="Nuevo contacto: Profesionales del Color" />

        <!-- Honeypot anti-spam field (hidden from users) -->
        <div class="form-group form-group--honeypot">
          <label for="honeypot" class="form-label">Website</label>
          <input
            type="text"
            id="honeypot"
            name="_honeypot"
            class="form-input"
            tabindex="-1"
            autocomplete="off"
            aria-hidden="true"
            style="display: none;"
          />
        </div>

        <button type="submit" class="submit-button">
          Enviar Solicitud
        </button>
      </form>

      <div class="contact-info">
        <div class="info-item">
          <h3 class="info-title">Teléfono</h3>
          <p class="info-content">
            <a href="tel:+34638943962">(+34) 638 94 39 62</a>
          </p>
        </div>

        <div class="info-item">
          <h3 class="info-title">Email</h3>
          <p class="info-content">
            <a href="mailto:info@profesionalesdelcolor.com">
              info@profesionalesdelcolor.com
            </a>
          </p>
        </div>

        <div class="info-item">
          <h3 class="info-title">Disponibilidad</h3>
          <p class="info-content">
            Lunes a Viernes: 9:00 - 18:00<br />
            Sábado: 10:00 - 14:00<br />
            Domingo: Cerrado
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Get form elements
  const form = document.querySelector('.contact-form') as HTMLFormElement;
  const submitButton = form?.querySelector('.submit-button') as HTMLButtonElement;
  const honeypotField = form?.querySelector('[name="_honeypot"]') as HTMLInputElement;

  if (form && submitButton) {
    form.addEventListener('submit', (e: Event) => {
      // Check honeypot field - if filled, likely spam bot
      if (honeypotField && honeypotField.value) {
        console.log('Honeypot filled - spam detected, preventing submission');
        e.preventDefault();
        return false;
      }

      // Update button state to indicate loading
      submitButton.disabled = true;
      submitButton.textContent = 'Enviando...';

      // Allow form to submit to FormSubmit.co
      // FormSubmit will handle the actual submission
    });
  }
</script>
